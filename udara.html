<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
      crossorigin="anonymous"
    />

    <title>Jakarta AQI</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html" style="font-size: 16px"
          >&ensp;&ensp; Jakarta AQI Maps &emsp;&emsp;&emsp;&emsp;&emsp;</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="udara.html"
                >Air Quality Index</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="polusi.html"
                >Air Infos</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="aboutus.html"
                >About Us</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-5 text-center">
      <h1 class="display-6">Kualitas udara di Jakarta </h1> <br>
        <div class="row">
         <div class="col-md-6">
           <div class="container border border-dark" height="100px">
            <div id="result"></div> 
            <div id="clock"></div>
           </div>
         </div>
          <div class="col-md-6">
            <div style="padding: 0px">
              <!--90vh-->
              <div id="mapid" style="width: 250px; height:250px; z-index: 1;">
                </div>
            </div>
          </div>
          <br>
        </div>
        <br>
       
    </div>

    <!-- Map -->
    <script type="text/javascript">
      //nunjuk mapid dari div diatas
      var mymap = L.map('mapid').setView([-6.206519390896224, 106.84598639803909], 11);
      // membuat layer baru supaya map ny gak blank pake mapbox style
      
      L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiaXhpcnlyIiwiYSI6ImNrcWN1bWg0MjAyNG8ydnF2c2RjeXRweDMifQ.AtVx8vUWuVIoct1P7yE0kw', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox/streets-v11',
        tileSize: 512,
        zoomOffset: -1,
        accessToken: 'your.mapbox.access.token'
      }).addTo(mymap);
      
      
  
      L.tileLayer('https://tiles.aqicn.org/tiles/usepa-aqi/{z}/{x}/{y}.png?token=434fc6630336ffcd47f950e20f91cb60a3c75603', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
      maxZoom: 18,
      id: 'mapbox/streets-v11',
      tileSize: 512,
      zoomOffset: -1,
      accessToken: 'your.mapbox.access.token'
      }).addTo(mymap);
  
  
      var photoImg = '<img src="https://user-images.githubusercontent.com/62769656/123553092-94249a80-d7a3-11eb-83f5-4adef54e8fa1.jpg" height="150px" width="200px"/>';
      // adding marker sesuai titik
      L.marker([-6.182554, 106.834241]).addTo(mymap)
        .bindPopup("<h3><b>Jakarta Pusat</b></h3><br /> Polutan dominant = PM2.5 <br /> Rata-rata PM2.5 = 110 <br /><br />" + photoImg);
      
      L.marker([-6.236721, 106.793236]).addTo(mymap)
        .bindPopup("<b>Hello world!</b><br />I am a popup.")/*.openPopup()*/;
  
     
    </script>

    
    <div class="p-3 mb-2 bg-light text-gray-dark">
   <div class="container mt-5 text-center">
            
            <h1 class="display-6"> Forecasting <br><br></h1>  
            
    <div id="tgl"></div>
    <div id="avg"></div>
     </div>
    </div>
    
   <!--  
    <script>
      var dt = new Date();
      document.getElementById("tanggalwaktu").innerHTML +="<br>" + dt.toLocaleString();
    </script>
  -->

  <div id="clock"></div>
    <script type="text/javascript">
    var apiUrl = 'https://api.waqi.info/feed/jakarta/?token=d2979932369608cb248b3329736a6d480b3ff31c';
    fetch(apiUrl).then(Response => { return Response.json();})
    .then(data => {
        document.getElementById("result").innerHTML +="Aqi sekarang adalah <h2>" + data.data.aqi +"</h2>";
        console.log(data)
    })
    </script>
    
    <script type="text/javascript">
  var url = 'https://api.waqi.info/feed/jakarta/?token=d2979932369608cb248b3329736a6d480b3ff31c';
  fetch(url).then(Response => { return Response.json();})
  .then(data => {
      data.data.forecast.daily.o3.forEach(element =>{
        document.getElementById("avg").innerHTML +="&emsp;" + element.avg +"&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;";
        document.getElementById("tgl").innerHTML +=element.day +"&emsp;&emsp;";
        console.log(element)
      });
    
      console.log(data)
  })
    </script>

     <!-- Menampilkan Jam (Aktif) -->
    <div id="clock"></div>
      <script type="text/javascript">
 
         function showTime() {
          var a_p = "";
          var today = new Date();
          var curr_hour = today.getHours();
          var curr_minute = today.getMinutes();
          var curr_second = today.getSeconds();
          if (curr_hour < 12) {
            a_p = "AM";
          } else {
            a_p = "PM";
          }
          if (curr_hour == 0) {
            curr_hour = 12;
          }
          if (curr_hour > 12) {
            curr_hour = curr_hour - 12;
          }
          curr_hour = checkTime(curr_hour);
          curr_minute = checkTime(curr_minute);
          curr_second = checkTime(curr_second);
        document.getElementById('clock').innerHTML=curr_hour + ":" + curr_minute + ":" + curr_second + " " + a_p;
     }
 
       function checkTime(i) {
        if (i < 10) {
         i = "0" + i;
        }
        return i;
     }
    setInterval(showTime, 500);
 </script>

    <!--
    <div class="row">
  <div class="col-md-6">
  Yuk jaga Kesehatan yuk, karena kalau bukan kita, siapa lagi ?
  </div>
  <div class="col-md-6">
  Selalu jagaa yuk semangat!!!
  </div>
  </div>-->
    
    
    <div class="container mt-5 text-center">
      <h1 class="display-6">Data Historical</h1> <br>
        <br><br>
    </div>
    
    
    
    
    
    
    
    
  
   <footer class="footer">
    <div class="container text-center p-4" style="background-color: rgba(0, 0, 0, 0.05)">
      <span class="text-muted">Copyright @theodorusansell 2021.</span>
    </div>
  </footer>


    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
